<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Work CV</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700&display=swap"
		rel="stylesheet" />

	<!-- CSS -->
	<link rel="stylesheet" th:href="@{/resources/assets/css/open-iconic-bootstrap.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/animate.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/owl.carousel.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/owl.theme.default.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/magnific-popup.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/owl.carousel.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/owl.theme.default.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/aos.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/ionicons.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/bootstrap-datepicker.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/jquery.timepicker.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/css/bootstrap-reboot.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/css/mixins/_text-hide.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/flaticon.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/icomoon.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/style.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/bootstrap/bootstrap-grid.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/bootstrap/bootstrap-reboot.css}" />

	<!-- JS -->
	<script th:src="@{/resources/assets/js/jquery.min.js}"></script>
	<script th:src="@{/resources/assets/js/jquery-migrate-3.0.1.min.js}"></script>
	<script th:src="@{/resources/assets/js/popper.min.js}"></script>
	<script th:src="@{/resources/assets/js/bootstrap.min.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.easing.1.3.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.waypoints.min.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.stellar.min.js}"></script>
	<script th:src="@{/resources/assets/js/owl.carousel.min.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.magnific-popup.min.js}"></script>
	<script th:src="@{/resources/assets/js/aos.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.animateNumber.min.js}"></script>
	<script th:src="@{/resources/assets/js/scrollax.min.js}"></script>
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
	<script th:src="@{/resources/assets/js/google-map.js}"></script>
	<script th:src="@{/resources/assets/js/main.js}"></script>
	<script src="https://cdn.ckeditor.com/ckeditor5/29.0.0/classic/ckeditor.js"></script>
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>

<body>
	<!--NAV-->
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid px-md-4">
			<a class="navbar-brand" th:href="@{/}">Work CV</a>
			<div class="collapse navbar-collapse" id="ftco-nav">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item active">
						<a th:href="@{/}" class="nav-link">Trang chủ</a>
					</li>
					<!-- EMPLOYER -->
					<li sec:authorize="hasRole('EMPLOYER')" class="nav-item">
						<a th:href="@{/recruitment/list-post}" class="nav-link">Công việc</a>
					</li>

					<li sec:authorize="hasRole('EMPLOYER')" class="nav-item">
						<a th:href="@{/}" class="nav-link">Ứng cử viên</a>
					</li>

					<li sec:authorize="hasRole('EMPLOYER')" th:if="${not #strings.isEmpty(#request.remoteUser)}"
						class="nav-item dropdown">
						<a style="color: white" class="nav-link" href="#" id="navbarDropdownMenuLink" role="button"
							data-toggle="dropdown" aria-expanded="false">Đăng tuyển</a>
						<ul style="left: -85px !important" class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<li>
								<a class="dropdown-item" th:href="@{/detail}">Hồ Sơ</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/recruitment/list-post}">Danh sách bài đăng</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/recruitment/post}">Đăng Tuyển</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/logout}">Đăng xuất</a>
							</li>
						</ul>
					</li>

					<!--CADIDATE-->
					<li sec:authorize="hasRole('CANDIDATE')" class="nav-item">
						<a th:href="@{/}" class="nav-link">Công việc</a>
					</li>
					<li sec:authorize="hasRole('CANDIDATE')" th:if="${not #strings.isEmpty(#request.remoteUser)}"
						class="nav-item dropdown">
						<a style="color: white" class="nav-link" href="#" id="navbarDropdownMenuLink" role="button"
							data-toggle="dropdown" aria-expanded="false">Hồ sơ</a>
						<ul style="left: -85px !important" class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<li>
								<a class="dropdown-item" th:href="@{/detail}">Hồ Sơ</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/save-job/get-list}">Công việc đã lưu</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/user/get-list-apply}">Công việc đã ứng tuyển</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/user/get-list-company}">Công ty đã theo dõi</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/logout}">Đăng xuất</a>
							</li>
						</ul>
					</li>
					<!--LOGIN && REGISTER-->
					<div th:if="${#strings.isEmpty(#request.remoteUser)}">
						<li class="nav-item cta cta-colored">
							<a th:href="@{/auth/login}" class="nav-link">Đăng nhập</a>
						</li>
					</div>
				</ul>
			</div>
		</div>
	</nav>
	<!-- END nav -->

	<div class="hero-wrap hero-wrap-2" th:style="'background-image: url('+@{/resources/assets/images/bg_1.jpg}+')'"
		data-stellar-background-ratio="0.5">
		<div class="overlay"></div>
		<div class="container">
			<div class="row no-gutters slider-text align-items-end justify-content-start">
				<div class="col-md-12 text-center mb-5">
					<p class="breadcrumbs mb-0">
						<span class="mr-3"><a href="index.html">Trang chủ <i
									class="ion-ios-arrow-forward"></i></a></span>Danh sách <span></span>
					</p>
					<h1 class="mb-3 bread">Danh sách bài đăng</h1>
				</div>
			</div>
		</div>
	</div>
	<div th:if="${success}" class="toast" data-delay="2500" style="
        position: fixed;
        top: 100px;
        left: 10px;
        z-index: 2000;
        width: 300px;
      ">
		<script>
			swal({
				title: "Thành công!",
				/* text: 'Redirecting...', */
				icon: "success",
				timer: 3000,
				buttons: true,
				type: "success",
			});
		</script>
	</div>
	<div th:if="${error}" class="toast" data-delay="2500" style="
        position: fixed;
        top: 100px;
        left: 10px;
        z-index: 2000;
        width: 300px;
      ">
		<script>
			swal({
				title: "Bài đăng đang có người ứng tuyển!",
				/* text: 'Redirecting...', */
				icon: "error",
				timer: 3000,
				buttons: true,
				type: "error",
			});
		</script>
	</div>
	<section class="ftco-section bg-light">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 pr-lg-4">
					<div class="row">
						<p th:if="${list.size()==0}">Chưa có bài đăng tuyển dụng nào</p>

						<th:block th:if="${list.size() > 0}" th:each="recruitment : ${list}">
							<div class="col-md-12">
								<div class="job-post-item p-4 d-block d-lg-flex align-items-center">
									<div class="one-third mb-4 mb-md-0">
										<div class="job-post-item-header align-items-center">
											<span class="subadge" th:text="${recruitment.type}"></span>
											<h2 class="mr-3 text-black">
												<a th:text="${recruitment.title}"
													th:href="${'/recruitment/detail/'} +${recruitment.id}"></a>
											</h2>
										</div>
										<div class="job-post-item-body d-block d-md-flex">
											<div class="mr-3">
												<span class="icon-layers"></span>
												<a href="#" th:text="${recruitment.Company.nameCompany}"></a>
											</div>
											<div>
												<span class="icon-my_location"></span>
												<span th:text="${recruitment.address}"></span>
											</div>
										</div>
									</div>

									<div class="one-forth ml-auto d-flex align-items-center mt-4 md-md-0"
										style="width: 330px !important">
										<a th:href="@{/recruitment/detail(recruitmentId=${recruitment.id})}"
											class="btn btn-primary py-2 ml-2">Xem chi tiết</a>
										<a th:href="@{/recruitment/editpost(recruitmentId=${recruitment.id})}"
											class="btn btn-warning py-2 ml-2">Cập nhật</a>
										<a class="btn btn-danger py-2 ml-2" href="" data-toggle="modal"
											th:data-target="${'#exampleModal'} + ${recruitment.id}">Xóa</a>
									</div>
								</div>
							</div>
							<!-- end -->
							<!-- Modal -->
							<div class="modal fade" th:id="${'exampleModal'} + ${recruitment.id}" tabindex="-1"
								role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="exampleModalLabel">
												Bạn có chắc chắn muốn xóa ?
											</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body">
											Bài đăng : <span th:text="${recruitment.title}"></span>
											<form th:action="@{/recruitment/delete}">
												<input type="hidden" id="id" name="recruitmentId"
													th:value="${recruitment.id}" />
												<div class="modal-footer mt-1">
													<button type="button" class="btn btn-secondary"
														data-dismiss="modal">
														Đóng
													</button>
													<button type="submit" class="btn btn-danger">
														Xóa
													</button>
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>
							<!-- Modal -->
						</th:block>
					</div>

					<div th:if="${totalPages > 1}" class="row pagination-wrap">
						<ul class="pagination ml-auto">
							<li class="page-item">
								<a th:if="${currentPage != 1}" class="page-link"
									th:href="@{'?page=' + ${currentPage - 1}}">Trang trước</a>
								<a th:if="${currentPage == 1}" class="page-link disabled">Trang trước</a>
							</li>
							<li class="page-item">
								<a th:if="${currentPage != totalPages}" class="page-link"
									th:href="@{'?page=' + ${currentPage + 1}}">Trang kế tiếp</a>
								<a th:if="${currentPage == totalPages}" class="page-link disabled">Trang kế tiếp</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</section>

	<script>
		ClassicEditor.create(document.querySelector("#editorN"))
			.then((eidt) => {
				console.log("da" + eidt);
			})
			.catch((error) => {
				console.error(error);
			});
	</script>
</body>

</html>