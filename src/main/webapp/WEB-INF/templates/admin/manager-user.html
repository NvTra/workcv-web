<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Work CV</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700&display=swap"
		rel="stylesheet" />

	<!-- CSS -->

	<link rel="stylesheet" th:href="@{/resources/assets/css/open-iconic-bootstrap.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/animate.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/owl.carousel.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/owl.theme.default.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/magnific-popup.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/owl.carousel.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/owl.theme.default.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/aos.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/ionicons.min.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/bootstrap-datepicker.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/jquery.timepicker.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/css/bootstrap-reboot.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/css/mixins/_text-hide.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/flaticon.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/icomoon.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/style.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/bootstrap/bootstrap-grid.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/bootstrap/bootstrap-reboot.css}" />
	<link rel="stylesheet" th:href="@{/resources/assets/css/tabletemplate.css}" />

	<!-- JS -->
	<script th:src="@{/resources/assets/js/jquery.min.js}"></script>
	<script th:src="@{/resources/assets/js/jquery-migrate-3.0.1.min.js}"></script>
	<script th:src="@{/resources/assets/js/popper.min.js}"></script>
	<script th:src="@{/resources/assets/js/bootstrap.min.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.easing.1.3.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.waypoints.min.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.stellar.min.js}"></script>
	<script th:src="@{/resources/assets/js/owl.carousel.min.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.magnific-popup.min.js}"></script>
	<script th:src="@{/resources/assets/js/aos.js}"></script>
	<script th:src="@{/resources/assets/js/jquery.animateNumber.min.js}"></script>
	<script th:src="@{/resources/assets/js/scrollax.min.js}"></script>
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
	<script th:src="@{/resources/assets/js/google-map.js}"></script>
	<script th:src="@{/resources/assets/js/main.js}"></script>
	<script src="https://cdn.ckeditor.com/ckeditor5/29.0.0/classic/ckeditor.js"></script>
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>

<body>
	<!--NAV-->
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid px-md-4">
			<a class="navbar-brand" th:href="@{/}">Work CV</a>
			<div class="collapse navbar-collapse" id="ftco-nav">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item active">
						<a th:href="@{/}" class="nav-link">Trang chủ</a>
					</li>
					<!-- ADMIN -->

					<li sec:authorize="hasRole('ADMIN')" th:if="${not #strings.isEmpty(#request.remoteUser)}"
						class="nav-item dropdown">
						<a style="color: white" class="nav-link" href="#" id="navbarDropdownMenuLink" role="button"
							data-toggle="dropdown" aria-expanded="false">Quản lý</a>
						<ul style="left: -85px !important" class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<li>
								<a class="dropdown-item" th:href="@{/admin/manager-user}">Quản lý tài khoản</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/logout}">Đăng xuất</a>
							</li>
						</ul>
					</li>

					<!-- EMPLOYER -->
					<li sec:authorize="hasRole('EMPLOYER')" class="nav-item">
						<a th:href="@{/recruitment/list-post}" class="nav-link">Công việc</a>
					</li>

					<li sec:authorize="hasRole('EMPLOYER')" class="nav-item">
						<a th:href="@{/user/list-user}" class="nav-link">Ứng cử viên</a>
					</li>

					<li sec:authorize="hasRole('EMPLOYER')" th:if="${not #strings.isEmpty(#request.remoteUser)}"
						class="nav-item dropdown">
						<a style="color: white" class="nav-link" href="#" id="navbarDropdownMenuLink" role="button"
							data-toggle="dropdown" aria-expanded="false">Đăng tuyển</a>
						<ul style="left: -85px !important" class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<li>
								<a class="dropdown-item" th:href="@{/detail}">Hồ Sơ</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/recruitment/list-post}">Danh sách bài đăng</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/recruitment/post}">Đăng Tuyển</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/logout}">Đăng xuất</a>
							</li>
						</ul>
					</li>

					<!--CADIDATE-->
					<li sec:authorize="hasRole('CANDIDATE')" class="nav-item">
						<a th:href="@{/user/get-list-apply}" class="nav-link">Công việc</a>
					</li>
					<li sec:authorize="hasRole('CANDIDATE')" th:if="${not #strings.isEmpty(#request.remoteUser)}"
						class="nav-item dropdown">
						<a style="color: white" class="nav-link" href="#" id="navbarDropdownMenuLink" role="button"
							data-toggle="dropdown" aria-expanded="false">Hồ sơ</a>
						<ul style="left: -85px !important" class="dropdown-menu"
							aria-labelledby="navbarDropdownMenuLink">
							<li>
								<a class="dropdown-item" th:href="@{/detail}">Hồ Sơ</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/save-job/get-list}">Công việc đã lưu</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/user/get-list-apply}">Công việc đã ứng tuyển</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/user/get-list-company}">Công ty đã theo dõi</a>
							</li>
							<li>
								<a class="dropdown-item" th:href="@{/logout}">Đăng xuất</a>
							</li>
						</ul>
					</li>
					<!--LOGIN && REGISTER-->
					<div th:if="${#strings.isEmpty(#request.remoteUser)}">
						<li class="nav-item cta cta-colored">
							<a th:href="@{/auth/login}" class="nav-link">Đăng nhập</a>
						</li>
					</div>
				</ul>
			</div>
		</div>
	</nav>
	<!-- END nav -->
	<section class="intro">
		<div class="bg-image h-100" style="background-color: #f5f7fa">
			<div class="mask d-flex align-items-center">
				<div class="container">
					<div class="row justify-content-center">
						<div class="col-12">
							<div class="card">
								<div class="card-body p-0">
									<div class="table-responsive table-scroll" data-mdb-perfect-scrollbar="true"
										style="position: relative; height: 700px">
										<table class="table table-striped mb-0">
											<thead style="background-color: #002d72">
												<tr>
													<th scope="col">Họ và tên</th>
													<th scope="col">Email</th>
													<th scope="col">Số điện thoại</th>
													<th scope="col">Trạng thái</th>
													<th scope="col">Vai trò</th>
													<th scope="col">Hành động</th>
												</tr>
											</thead>
											<tbody>
												<tr th:each="user : ${list}">
													<td th:text="${user.fullName}"></td>
													<td th:text="${user.email}"></td>
													<td th:text="${user.phoneNumber}"></td>
													<td th:text="${user.status == 0 ? 'Đang khóa' : 'Hoạt động'}"
														th:classappend="${user.status == 0} ? 'text-danger' : 'text-success'">
													</td>
													<td th:text="${user.role.roleName}"></td>
													<td>
														<a class="btn btn-danger ml-2" href="" data-toggle="modal"
															th:data-target="${'#exampleModal'} + ${user.id}">Xóa</a>
														<a th:href="@{/admin/lock(userId=${user.id})}"
															th:if="${user.status==1}" 
															class="btn btn-danger ml-2">Khóa</a>
														<a th:href="@{/admin/lock(userId=${user.id})}"
															th:unless="${user.status==1}" 
															class="btn btn-success ml-2">Mở</a>
													</td>
													<!--Modal delete-->
													<div class="modal fade" th:id="${'exampleModal'} + ${user.id}"
														tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
														aria-hidden="true">
														<div class="modal-dialog" role="document">
															<div class="modal-content">
																<div class="modal-header">
																	<h5 class="modal-title" id="exampleModalLabel">
																		Bạn có chắc chắn muốn xóa ?
																	</h5>
																	<button type="button" class="close"
																		data-dismiss="modal" aria-label="Close">
																		<span aria-hidden="true">&times;</span>
																	</button>
																</div>
																<div class="modal-body">
																	Họ tên : <span th:text="${user.fullName}"></span>

																	<div class="modal-footer mt-1">
																		<button type="button" class="btn btn-secondary"
																			data-dismiss="modal">
																			Đóng
																		</button>
																		<a th:href="@{/admin/delete(userId=${user.id})}" class="btn btn-danger">
																			Xóa
																		</a>
																	</div>

																</div>
															</div>
														</div>
													</div>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div style="text-align: center" th:if="${list.size() < 1}">
						<p style="color: red">Danh sách trống</p>
					</div>
					<div th:if="${totalPages > 1}" class="row pagination-wrap">
						<ul class="pagination ml-auto">
							<li class="page-item">
								<a th:if="${currentPage != 1}" class="page-link"
									th:href="@{'?page=' + ${currentPage - 1}}">Trang trước</a>
								<a th:if="${currentPage == 1}" class="page-link disabled">Trang trước</a>
							</li>
							<li class="page-item">
								<a th:if="${currentPage != totalPages}" class="page-link"
									th:href="@{'?page=' + ${currentPage + 1}}">Trang kế tiếp</a>
								<a th:if="${currentPage == totalPages}" class="page-link disabled">Trang kế tiếp</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>

</html>